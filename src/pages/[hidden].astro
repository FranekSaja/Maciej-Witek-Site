---
import MainLayout from "@layouts/MainLayout.astro";
import { getCollection } from "astro:content";

export async function getStaticPaths() {
  const hiddenPages = await getCollection("hidden");
  return hiddenPages.map((entry) => ({ params: { hidden: entry.slug } }));
}

const { hidden } = Astro.params;
const hiddenPages = await getCollection("hidden");
const entry = hiddenPages.find((p) => p.slug === hidden);

if (!entry) {
  return Astro.redirect("/404");
}

import H1 from '@components/mdx/H1.astro';
import H2 from '@components/mdx/H2.astro';

const { Content } = await entry.render();
---
<MainLayout title={`Maciej Witek â€” ${entry.data.title}`} description={`Podstrona ${entry.data.title}`}>
  <section class="space-y-6">
    <article class="prose dark:prose-invert max-w-none">
      <Content components={{ h1: H1, h2: H2 }} />
    </article>
  </section>
</MainLayout>